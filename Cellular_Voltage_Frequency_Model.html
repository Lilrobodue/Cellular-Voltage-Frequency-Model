<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cellular Voltage-Frequency Model | Unified Lewis Framework</title>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'Cormorant Garamond', Georgia, serif;
      background: linear-gradient(135deg, #0a0a15 0%, #1a1a2e 50%, #0a0a15 100%);
      color: #e0e0e0;
      min-height: 100vh;
      overflow-x: hidden;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }
    
    /* Header */
    .header {
      text-align: center;
      padding: 30px 0;
      border-bottom: 1px solid rgba(100, 255, 200, 0.2);
      margin-bottom: 30px;
    }
    
    .header h1 {
      font-size: 2.2rem;
      font-weight: 300;
      letter-spacing: 0.1em;
      background: linear-gradient(90deg, #64ffc8, #4FC3F7, #FFD700);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 10px;
    }
    
    .header .subtitle {
      font-size: 1.1rem;
      color: #8892b0;
      font-style: italic;
    }
    
    .header .equation {
      font-family: 'Courier New', monospace;
      font-size: 1.5rem;
      color: #FFD700;
      margin-top: 15px;
      letter-spacing: 0.05em;
    }
    
    /* Main Layout */
    .main-grid {
      display: grid;
      grid-template-columns: 1fr 350px;
      gap: 30px;
      align-items: start;
    }
    
    @media (max-width: 900px) {
      .main-grid {
        grid-template-columns: 1fr;
      }
    }
    
    /* Cell Visualization */
    .cell-container {
      background: rgba(10, 15, 30, 0.8);
      border-radius: 20px;
      border: 1px solid rgba(100, 255, 200, 0.2);
      padding: 30px;
      position: relative;
      min-height: 500px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    
    .cell-wrapper {
      position: relative;
      width: 320px;
      height: 320px;
    }
    
    /* The Cell */
    .cell {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 250px;
      height: 250px;
      border-radius: 50%;
      background: radial-gradient(ellipse at 30% 30%, 
        var(--cell-bright) 0%, 
        var(--cell-mid) 40%, 
        var(--cell-dark) 100%);
      box-shadow: 
        0 0 60px var(--glow-color),
        0 0 100px var(--glow-color-dim),
        inset 0 0 60px rgba(0,0,0,0.3);
      animation: pulse var(--pulse-duration) ease-in-out infinite;
      transition: all 0.5s ease;
    }
    
    @keyframes pulse {
      0%, 100% { 
        transform: translate(-50%, -50%) scale(1); 
        box-shadow: 
          0 0 60px var(--glow-color),
          0 0 100px var(--glow-color-dim),
          inset 0 0 60px rgba(0,0,0,0.3);
      }
      50% { 
        transform: translate(-50%, -50%) scale(var(--pulse-scale)); 
        box-shadow: 
          0 0 80px var(--glow-color),
          0 0 120px var(--glow-color-dim),
          inset 0 0 40px rgba(0,0,0,0.2);
      }
    }
    
    /* Cell Membrane */
    .membrane {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 260px;
      height: 260px;
      border-radius: 50%;
      border: 4px solid var(--membrane-color);
      box-shadow: 
        0 0 20px var(--membrane-glow),
        inset 0 0 20px var(--membrane-glow);
      animation: membrane-pulse var(--pulse-duration) ease-in-out infinite;
    }
    
    @keyframes membrane-pulse {
      0%, 100% { 
        border-width: 4px;
        opacity: 0.9;
      }
      50% { 
        border-width: 6px;
        opacity: 1;
      }
    }
    
    /* Nucleus */
    .nucleus {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: radial-gradient(ellipse at 30% 30%,
        var(--nucleus-bright) 0%,
        var(--nucleus-dark) 100%);
      box-shadow: 
        0 0 30px var(--nucleus-glow),
        inset 0 0 20px rgba(0,0,0,0.4);
      animation: nucleus-pulse var(--pulse-duration) ease-in-out infinite;
    }
    
    @keyframes nucleus-pulse {
      0%, 100% { transform: translate(-50%, -50%) scale(1); }
      50% { transform: translate(-50%, -50%) scale(1.05); }
    }
    
    /* Mitochondria */
    .mitochondria {
      position: absolute;
      width: 35px;
      height: 18px;
      border-radius: 50%;
      background: linear-gradient(90deg, var(--mito-color) 0%, var(--mito-bright) 50%, var(--mito-color) 100%);
      box-shadow: 0 0 10px var(--mito-glow);
    }
    
    .mitochondria:nth-child(1) { 
      top: 25%; left: 20%; 
      animation: mito-float-1 var(--mito-duration) ease-in-out infinite;
    }
    .mitochondria:nth-child(2) { 
      top: 60%; left: 15%; 
      animation: mito-float-2 var(--mito-duration) ease-in-out infinite;
      animation-delay: 0.5s;
    }
    .mitochondria:nth-child(3) { 
      top: 30%; right: 18%; 
      animation: mito-float-3 var(--mito-duration) ease-in-out infinite;
      animation-delay: 1s;
    }
    .mitochondria:nth-child(4) { 
      top: 65%; right: 20%; 
      animation: mito-float-4 var(--mito-duration) ease-in-out infinite;
      animation-delay: 1.5s;
    }
    .mitochondria:nth-child(5) { 
      top: 45%; left: 25%; 
      animation: mito-float-5 var(--mito-duration) ease-in-out infinite;
      animation-delay: 0.3s;
    }
    
    @keyframes mito-float-1 {
      0%, 100% { 
        transform: translate(0, 0) rotate(30deg); 
        opacity: var(--mito-opacity); 
      }
      25% { transform: translate(15px, -10px) rotate(45deg); }
      50% { 
        transform: translate(25px, 5px) rotate(60deg); 
        opacity: calc(var(--mito-opacity) * 1.3); 
      }
      75% { transform: translate(10px, 15px) rotate(40deg); }
    }
    
    @keyframes mito-float-2 {
      0%, 100% { 
        transform: translate(0, 0) rotate(-20deg); 
        opacity: var(--mito-opacity); 
      }
      25% { transform: translate(-10px, -15px) rotate(-35deg); }
      50% { 
        transform: translate(5px, -25px) rotate(-10deg); 
        opacity: calc(var(--mito-opacity) * 1.3); 
      }
      75% { transform: translate(15px, -10px) rotate(-25deg); }
    }
    
    @keyframes mito-float-3 {
      0%, 100% { 
        transform: translate(0, 0) rotate(60deg); 
        opacity: var(--mito-opacity); 
      }
      25% { transform: translate(-20px, 10px) rotate(75deg); }
      50% { 
        transform: translate(-15px, 20px) rotate(50deg); 
        opacity: calc(var(--mito-opacity) * 1.3); 
      }
      75% { transform: translate(-5px, 10px) rotate(65deg); }
    }
    
    @keyframes mito-float-4 {
      0%, 100% { 
        transform: translate(0, 0) rotate(-45deg); 
        opacity: var(--mito-opacity); 
      }
      25% { transform: translate(-15px, -20px) rotate(-30deg); }
      50% { 
        transform: translate(-25px, -10px) rotate(-55deg); 
        opacity: calc(var(--mito-opacity) * 1.3); 
      }
      75% { transform: translate(-10px, -5px) rotate(-40deg); }
    }
    
    @keyframes mito-float-5 {
      0%, 100% { 
        transform: translate(0, 0) rotate(10deg); 
        opacity: var(--mito-opacity); 
      }
      25% { transform: translate(20px, 15px) rotate(25deg); }
      50% { 
        transform: translate(10px, 25px) rotate(0deg); 
        opacity: calc(var(--mito-opacity) * 1.3); 
      }
      75% { transform: translate(-5px, 15px) rotate(15deg); }
    }
    
    /* Biophotons */
    .biophotons {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 300px;
      height: 300px;
      pointer-events: none;
    }
    
    .photon {
      position: absolute;
      width: 6px;
      height: 6px;
      background: var(--photon-color);
      border-radius: 50%;
      box-shadow: 0 0 10px var(--photon-color), 0 0 20px var(--photon-color);
      animation: photon-emit var(--photon-duration) ease-out infinite;
      opacity: 0;
    }
    
    @keyframes photon-emit {
      0% { 
        transform: translate(-50%, -50%) scale(0.5);
        opacity: var(--photon-opacity);
      }
      100% { 
        transform: translate(var(--photon-x), var(--photon-y)) scale(0);
        opacity: 0;
      }
    }
    
    /* Control Panel */
    .control-panel {
      background: rgba(10, 15, 30, 0.9);
      border-radius: 15px;
      border: 1px solid rgba(100, 255, 200, 0.2);
      padding: 25px;
    }
    
    .panel-title {
      font-size: 1.3rem;
      color: #64ffc8;
      margin-bottom: 20px;
      text-align: center;
      letter-spacing: 0.05em;
    }
    
    /* Voltage Control */
    .voltage-control {
      margin-bottom: 30px;
    }
    
    .voltage-label {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    
    .voltage-label span {
      color: #8892b0;
      font-size: 0.95rem;
    }
    
    .voltage-value {
      font-family: 'Courier New', monospace;
      font-size: 1.8rem;
      font-weight: bold;
      color: var(--voltage-color);
      text-shadow: 0 0 20px var(--voltage-color);
      transition: all 0.3s;
    }
    
    .voltage-slider {
      width: 100%;
      height: 12px;
      -webkit-appearance: none;
      background: linear-gradient(90deg, 
        #ff4444 0%, 
        #ff8844 25%, 
        #ffcc44 50%, 
        #88ff88 75%, 
        #44ffcc 100%);
      border-radius: 6px;
      outline: none;
      cursor: pointer;
    }
    
    .voltage-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 24px;
      height: 24px;
      background: #fff;
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 0 10px rgba(255,255,255,0.5);
    }
    
    .voltage-zones {
      display: flex;
      justify-content: space-between;
      margin-top: 8px;
      font-size: 0.75rem;
      color: #666;
    }
    
    /* Calculations Display */
    .calculations {
      background: rgba(0, 0, 0, 0.3);
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 25px;
    }
    
    .calc-title {
      color: #FFD700;
      font-size: 1rem;
      margin-bottom: 15px;
      text-align: center;
    }
    
    .calc-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 0;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    
    .calc-row:last-child {
      border-bottom: none;
    }
    
    .calc-label {
      color: #8892b0;
      font-size: 0.9rem;
    }
    
    .calc-value {
      font-family: 'Courier New', monospace;
      color: #64ffc8;
      font-size: 1rem;
    }
    
    .calc-value.highlight {
      color: #FFD700;
      font-size: 1.1rem;
      font-weight: bold;
    }
    
    /* Health Status */
    .health-status {
      text-align: center;
      padding: 20px;
      border-radius: 10px;
      background: var(--status-bg);
      border: 2px solid var(--status-border);
      margin-bottom: 20px;
      transition: all 0.5s;
    }
    
    .status-label {
      font-size: 0.85rem;
      color: #8892b0;
      margin-bottom: 5px;
    }
    
    .status-text {
      font-size: 1.4rem;
      font-weight: 600;
      color: var(--status-color);
      text-shadow: 0 0 15px var(--status-color);
    }
    
    /* Info Panel */
    .info-panel {
      background: rgba(0, 0, 0, 0.2);
      border-radius: 10px;
      padding: 15px;
      font-size: 0.85rem;
      line-height: 1.6;
    }
    
    .info-panel h4 {
      color: #64ffc8;
      margin-bottom: 10px;
    }
    
    .info-panel p {
      color: #8892b0;
      margin-bottom: 10px;
    }
    
    .info-panel .source {
      font-size: 0.75rem;
      color: #666;
      font-style: italic;
    }
    
    /* Footer */
    .footer {
      text-align: center;
      padding: 30px;
      margin-top: 30px;
      border-top: 1px solid rgba(100, 255, 200, 0.2);
      color: #666;
      font-size: 0.9rem;
    }
    
    .footer a {
      color: #64ffc8;
      text-decoration: none;
    }
    
    /* Presets */
    .presets {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-bottom: 20px;
    }
    
    .preset-btn {
      padding: 10px 15px;
      border-radius: 8px;
      border: 1px solid;
      cursor: pointer;
      font-family: inherit;
      font-size: 0.85rem;
      transition: all 0.3s;
    }
    
    .preset-healthy {
      background: rgba(68, 255, 204, 0.1);
      border-color: rgba(68, 255, 204, 0.4);
      color: #44ffcc;
    }
    
    .preset-healthy:hover {
      background: rgba(68, 255, 204, 0.2);
    }
    
    .preset-optimal {
      background: rgba(100, 255, 200, 0.1);
      border-color: rgba(100, 255, 200, 0.4);
      color: #64ffc8;
    }
    
    .preset-optimal:hover {
      background: rgba(100, 255, 200, 0.2);
    }
    
    .preset-stressed {
      background: rgba(255, 204, 68, 0.1);
      border-color: rgba(255, 204, 68, 0.4);
      color: #ffcc44;
    }
    
    .preset-stressed:hover {
      background: rgba(255, 204, 68, 0.2);
    }
    
    .preset-diseased {
      background: rgba(255, 68, 68, 0.1);
      border-color: rgba(255, 68, 68, 0.4);
      color: #ff4444;
    }
    
    .preset-diseased:hover {
      background: rgba(255, 68, 68, 0.2);
    }
    
    /* Comparison Mode */
    .comparison-toggle {
      text-align: center;
      margin-bottom: 20px;
    }
    
    .toggle-btn {
      background: rgba(255, 215, 0, 0.1);
      border: 1px solid rgba(255, 215, 0, 0.4);
      color: #FFD700;
      padding: 10px 25px;
      border-radius: 8px;
      cursor: pointer;
      font-family: inherit;
      font-size: 0.9rem;
      transition: all 0.3s;
    }
    
    .toggle-btn:hover {
      background: rgba(255, 215, 0, 0.2);
    }
    
    .toggle-btn.active {
      background: #FFD700;
      color: #000;
    }
    
    /* Comparison Grid */
    .comparison-grid {
      display: none;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    
    .comparison-grid.active {
      display: grid;
    }
    
    .comparison-cell {
      background: rgba(10, 15, 30, 0.8);
      border-radius: 15px;
      border: 1px solid rgba(100, 255, 200, 0.2);
      padding: 20px;
      text-align: center;
    }
    
    .comparison-cell h3 {
      font-size: 1rem;
      margin-bottom: 15px;
    }
    
    .comparison-cell.healthy h3 { color: #44ffcc; }
    .comparison-cell.diseased h3 { color: #ff4444; }
    
    .mini-cell-wrapper {
      width: 150px;
      height: 150px;
      margin: 0 auto 15px;
      position: relative;
    }
    
    .mini-cell {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 120px;
      height: 120px;
      border-radius: 50%;
    }
    
    .single-view {
      display: block;
    }
    
    .single-view.hidden {
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <header class="header">
      <h1>Cellular Voltage-Frequency Model</h1>
      <p class="subtitle">E = hf at the Cellular Scale ‚Äî The Unified Lewis Framework</p>
      <p class="equation">E = hf ‚Üí Cell Energy ‚àù Cell Frequency</p>
    </header>
    
    <div class="comparison-toggle">
      <button class="toggle-btn" onclick="toggleComparison()">‚öñÔ∏è Toggle Comparison View</button>
    </div>
    
    <div class="main-grid single-view" id="singleView">
      <div class="cell-container">
        <div class="cell-wrapper" id="cellWrapper">
          <div class="biophotons" id="biophotons"></div>
          <div class="membrane"></div>
          <div class="cell"></div>
          <div class="mitochondria"></div>
          <div class="mitochondria"></div>
          <div class="mitochondria"></div>
          <div class="mitochondria"></div>
          <div class="mitochondria"></div>
          <div class="nucleus"></div>
        </div>
        
        <div style="margin-top: 30px; text-align: center;">
          <p style="color: #8892b0; font-size: 0.9rem;">Oscillation Frequency</p>
          <p id="freqDisplay" style="font-family: 'Courier New'; font-size: 2rem; color: #FFD700;"></p>
        </div>
      </div>
      
      <div class="control-panel">
        <h2 class="panel-title">‚ö° Cell Parameters</h2>
        
        <div class="presets">
          <button class="preset-btn preset-optimal" onclick="setVoltage(-90)">Optimal (-90mV)</button>
          <button class="preset-btn preset-healthy" onclick="setVoltage(-70)">Healthy (-70mV)</button>
          <button class="preset-btn preset-stressed" onclick="setVoltage(-50)">Stressed (-50mV)</button>
          <button class="preset-btn preset-diseased" onclick="setVoltage(-20)">Diseased (-20mV)</button>
        </div>
        
        <div class="voltage-control">
          <div class="voltage-label">
            <span>Membrane Potential</span>
            <span class="voltage-value" id="voltageValue">-70 mV</span>
          </div>
          <input type="range" class="voltage-slider" id="voltageSlider" 
                 min="-100" max="-10" value="-70" oninput="updateCell()">
          <div class="voltage-zones">
            <span>-100mV</span>
            <span>-55mV</span>
            <span>-10mV</span>
          </div>
        </div>
        
        <div class="health-status" id="healthStatus">
          <p class="status-label">Cell State</p>
          <p class="status-text" id="statusText">Healthy</p>
        </div>
        
        <div class="calculations">
          <h3 class="calc-title">üìä E = hf Calculations</h3>
          <div class="calc-row">
            <span class="calc-label">Membrane Voltage (V)</span>
            <span class="calc-value" id="calcVoltage">-70 mV</span>
          </div>
          <div class="calc-row">
            <span class="calc-label">Normalized Frequency (f)</span>
            <span class="calc-value" id="calcFreq">70 Hz</span>
          </div>
          <div class="calc-row">
            <span class="calc-label">h (Planck constant)</span>
            <span class="calc-value">6.626 √ó 10‚Åª¬≥‚Å¥ J¬∑s</span>
          </div>
          <div class="calc-row">
            <span class="calc-label">Cell Energy (E = hf)</span>
            <span class="calc-value highlight" id="calcEnergy">4.64 √ó 10‚Åª¬≥¬≤ J</span>
          </div>
          <div class="calc-row">
            <span class="calc-label">Relative Energy</span>
            <span class="calc-value highlight" id="calcRelative">100%</span>
          </div>
        </div>
        
        <div class="info-panel">
          <h4>üìö The Science</h4>
          <p>Dr. Otto Warburg (Nobel Prize, 1931) discovered that healthy cells maintain -70 to -100 mV, while cancer cells drop to -15 to -20 mV.</p>
          <p>Higher voltage = Higher frequency = Higher energy = Better cellular function.</p>
          <p>This directly demonstrates <strong>E = hf</strong> at the cellular scale.</p>
          <p class="source">Sources: Warburg, Lakhovsky, Becker, modern biophysics research</p>
        </div>
      </div>
    </div>
    
    <div class="comparison-grid" id="comparisonView">
      <div class="comparison-cell healthy">
        <h3>‚ú® Healthy Cell (-70mV)</h3>
        <div class="mini-cell-wrapper">
          <div class="mini-cell" style="
            background: radial-gradient(ellipse at 30% 30%, #88ffcc 0%, #44aa88 40%, #226655 100%);
            box-shadow: 0 0 40px rgba(68, 255, 170, 0.6), 0 0 60px rgba(68, 255, 170, 0.3);
            animation: pulse 0.8s ease-in-out infinite;
          "></div>
        </div>
        <p style="color: #44ffcc; font-size: 1.2rem;">f = 70 Hz</p>
        <p style="color: #8892b0; font-size: 0.85rem;">E = 4.64 √ó 10‚Åª¬≥¬≤ J</p>
        <p style="color: #44ffcc; font-size: 0.9rem; margin-top: 10px;">100% Energy</p>
      </div>
      
      <div class="comparison-cell diseased">
        <h3>‚ö†Ô∏è Diseased Cell (-20mV)</h3>
        <div class="mini-cell-wrapper">
          <div class="mini-cell" style="
            background: radial-gradient(ellipse at 30% 30%, #aa6666 0%, #774444 40%, #442222 100%);
            box-shadow: 0 0 20px rgba(170, 68, 68, 0.3), 0 0 30px rgba(170, 68, 68, 0.1);
            animation: pulse 2.5s ease-in-out infinite;
          "></div>
        </div>
        <p style="color: #ff4444; font-size: 1.2rem;">f = 20 Hz</p>
        <p style="color: #8892b0; font-size: 0.85rem;">E = 1.33 √ó 10‚Åª¬≥¬≤ J</p>
        <p style="color: #ff4444; font-size: 0.9rem; margin-top: 10px;">28.5% Energy</p>
      </div>
    </div>
    
    <footer class="footer">
      <p><strong>The Unified Lewis Framework</strong> ‚Äî E = hf Across All Scales</p>
      <p style="margin-top: 10px;">Created by the Lewis Family | 2026</p>
      <p style="margin-top: 5px;">üíú "Energy, Frequency, Vibration" ‚Äî Tesla</p>
    </footer>
  </div>
  
  <script>
    // Generate biophotons
    function createBiophotons() {
      const container = document.getElementById('biophotons');
      container.innerHTML = '';
      for (let i = 0; i < 20; i++) {
        const photon = document.createElement('div');
        photon.className = 'photon';
        const angle = (i / 20) * Math.PI * 2;
        const distance = 100 + Math.random() * 50;
        photon.style.setProperty('--photon-x', `${Math.cos(angle) * distance}px`);
        photon.style.setProperty('--photon-y', `${Math.sin(angle) * distance}px`);
        photon.style.left = '50%';
        photon.style.top = '50%';
        photon.style.animationDelay = `${Math.random() * 2}s`;
        container.appendChild(photon);
      }
    }
    
    createBiophotons();
    
    // Color interpolation helper
    function lerp(a, b, t) {
      return a + (b - a) * t;
    }
    
    function lerpColor(color1, color2, t) {
      const r1 = parseInt(color1.slice(1,3), 16);
      const g1 = parseInt(color1.slice(3,5), 16);
      const b1 = parseInt(color1.slice(5,7), 16);
      const r2 = parseInt(color2.slice(1,3), 16);
      const g2 = parseInt(color2.slice(3,5), 16);
      const b2 = parseInt(color2.slice(5,7), 16);
      const r = Math.round(lerp(r1, r2, t));
      const g = Math.round(lerp(g1, g2, t));
      const b = Math.round(lerp(b1, b2, t));
      return `#${r.toString(16).padStart(2,'0')}${g.toString(16).padStart(2,'0')}${b.toString(16).padStart(2,'0')}`;
    }
    
    function setVoltage(v) {
      document.getElementById('voltageSlider').value = v;
      updateCell();
    }
    
    function updateCell() {
      const voltage = parseInt(document.getElementById('voltageSlider').value);
      const absVoltage = Math.abs(voltage);
      
      // Normalize to 0-1 range (10mV = 0, 100mV = 1)
      const t = (absVoltage - 10) / 90;
      
      // Calculate frequency (normalized for visualization)
      const frequency = absVoltage; // Direct mapping for simplicity
      
      // Calculate energy using E = hf
      const h = 6.626e-34;
      const energy = h * frequency;
      
      // Relative energy compared to healthy (-70mV)
      const relativeEnergy = (frequency / 70) * 100;
      
      // Pulse duration (faster for healthier cells)
      const pulseDuration = lerp(2.5, 0.6, t);
      
      // Pulse scale (more pronounced for healthier cells)
      const pulseScale = lerp(1.01, 1.08, t);
      
      // Colors based on health
      let cellBright, cellMid, cellDark, glowColor, status, statusColor;
      
      if (absVoltage >= 70) {
        // Healthy to optimal
        const healthT = (absVoltage - 70) / 30;
        cellBright = lerpColor('#66ddaa', '#88ffcc', healthT);
        cellMid = lerpColor('#448866', '#55aa88', healthT);
        cellDark = lerpColor('#224433', '#336655', healthT);
        glowColor = `rgba(68, 255, 170, ${lerp(0.4, 0.7, healthT)})`;
        status = absVoltage >= 85 ? 'Optimal' : 'Healthy';
        statusColor = '#44ffcc';
      } else if (absVoltage >= 50) {
        // Stressed
        const stressT = (absVoltage - 50) / 20;
        cellBright = lerpColor('#cccc66', '#66ddaa', stressT);
        cellMid = lerpColor('#888844', '#448866', stressT);
        cellDark = lerpColor('#444422', '#224433', stressT);
        glowColor = `rgba(200, 200, 68, ${lerp(0.25, 0.4, stressT)})`;
        status = 'Stressed';
        statusColor = '#ffcc44';
      } else if (absVoltage >= 30) {
        // Compromised
        const compT = (absVoltage - 30) / 20;
        cellBright = lerpColor('#cc8866', '#cccc66', compT);
        cellMid = lerpColor('#885544', '#888844', compT);
        cellDark = lerpColor('#442222', '#444422', compT);
        glowColor = `rgba(200, 136, 68, ${lerp(0.2, 0.25, compT)})`;
        status = 'Compromised';
        statusColor = '#ff8844';
      } else {
        // Diseased
        const diseaseT = (absVoltage - 10) / 20;
        cellBright = lerpColor('#aa5555', '#cc8866', diseaseT);
        cellMid = lerpColor('#663333', '#885544', diseaseT);
        cellDark = lerpColor('#331111', '#442222', diseaseT);
        glowColor = `rgba(170, 68, 68, ${lerp(0.1, 0.2, diseaseT)})`;
        status = absVoltage <= 20 ? 'Diseased/Cancer' : 'Severely Compromised';
        statusColor = '#ff4444';
      }
      
      // Update CSS variables
      const root = document.documentElement.style;
      root.setProperty('--cell-bright', cellBright);
      root.setProperty('--cell-mid', cellMid);
      root.setProperty('--cell-dark', cellDark);
      root.setProperty('--glow-color', glowColor);
      root.setProperty('--glow-color-dim', glowColor.replace(/[\d.]+\)$/, '0.2)'));
      root.setProperty('--pulse-duration', `${pulseDuration}s`);
      root.setProperty('--pulse-scale', pulseScale);
      root.setProperty('--voltage-color', statusColor);
      
      // Membrane
      root.setProperty('--membrane-color', `rgba(255, 255, 255, ${lerp(0.1, 0.4, t)})`);
      root.setProperty('--membrane-glow', glowColor);
      
      // Nucleus
      root.setProperty('--nucleus-bright', lerpColor('#553355', '#8866aa', t));
      root.setProperty('--nucleus-dark', lerpColor('#221122', '#443366', t));
      root.setProperty('--nucleus-glow', `rgba(136, 102, 170, ${lerp(0.2, 0.5, t)})`);
      
      // Mitochondria
      root.setProperty('--mito-color', lerpColor('#554433', '#88aa66', t));
      root.setProperty('--mito-bright', lerpColor('#665544', '#aacc88', t));
      root.setProperty('--mito-glow', `rgba(136, 170, 102, ${lerp(0.1, 0.4, t)})`);
      root.setProperty('--mito-opacity', lerp(0.3, 1, t));
      root.setProperty('--mito-duration', `${pulseDuration * 1.5}s`);
      
      // Biophotons
      root.setProperty('--photon-color', statusColor);
      root.setProperty('--photon-opacity', lerp(0, 0.9, t));
      root.setProperty('--photon-duration', `${lerp(4, 1.5, t)}s`);
      
      // Status
      root.setProperty('--status-bg', `${statusColor}15`);
      root.setProperty('--status-border', `${statusColor}66`);
      root.setProperty('--status-color', statusColor);
      
      // Update displays
      document.getElementById('voltageValue').textContent = `${voltage} mV`;
      document.getElementById('statusText').textContent = status;
      document.getElementById('calcVoltage').textContent = `${voltage} mV`;
      document.getElementById('calcFreq').textContent = `${frequency} Hz`;
      document.getElementById('calcEnergy').textContent = `${energy.toExponential(2)} J`;
      document.getElementById('calcRelative').textContent = `${relativeEnergy.toFixed(1)}%`;
      document.getElementById('freqDisplay').textContent = `${frequency} Hz`;
    }
    
    function toggleComparison() {
      const single = document.getElementById('singleView');
      const comparison = document.getElementById('comparisonView');
      const btn = document.querySelector('.toggle-btn');
      
      if (comparison.classList.contains('active')) {
        comparison.classList.remove('active');
        single.classList.remove('hidden');
        btn.classList.remove('active');
      } else {
        comparison.classList.add('active');
        single.classList.add('hidden');
        btn.classList.add('active');
      }
    }
    
    // Initialize
    updateCell();
  </script>
</body>
</html>
